(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authenticate"],{"8ce9":function(t,e,n){},c656:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VResponsive",[n("VContainer",[n("VRow",{attrs:{align:"start",justify:"center"}},[n("VCol",{staticClass:"mt-12",attrs:{cols:"12",sm:"10"}},[n("h3",{staticClass:"display-2 font-weight-medium"},[t._v(" Spotify track preview ")]),n("div",{staticClass:"mt-2 subtitle-1"},[t._v(" Player to play the Spotify song preview ")]),n("VDivider",{staticClass:"my-3"}),n("h6",{staticClass:"title mb-3"},[t._v(" Authenticate this application by clicking the login button below! ")]),n("VBtn",{attrs:{color:"primary",large:"",loading:t.loginLoading},on:{click:t.startAuthenticationProcess}},[t._v(" Login ")])],1)],1)],1)],1)},o=[],a=n("2ef0"),r=n.n(a),s=n("9eb0"),c={name:"Authenticate",data:function(){return{loginLoading:!1,gradient:"to top right, rgba(63,81,181, .7), rgba(25,32,72, .7)"}},mounted:function(){r.a.get(this.$route,"params.authenticateNow")&&this.startAuthenticationProcess();var t=r.a.get(this.$route,"redirectedFrom");if(t&&r.a.startsWith(t,"/")){this.loginLoading=!0;var e=r.a.flow((function(t){return t.substring(1)}),(function(t){return r.a.split(t,"&")}),(function(t){return r.a.map(t,(function(t){return r.a.split(t,"=")}))}),(function(t){return r.a.map(t,(function(t){return r.a.map(t,(function(t){return decodeURIComponent(t)}))}))}),r.a.fromPairs)(t);["access_token","expires_in","state","token_type"].every((function(t){return t in e}))&&r.a.get(e,"expires_in",0)>0?(console.log("Got access token successfully"),this.$localStorage.set("access_token",r.a.get(e,"access_token")),this.$router.push({name:"Player"})):console.warn("The redirectedFrom key did not meet the required criteria",e),this.loginLoading=!1}},methods:{startAuthenticationProcess:function(){var t="https://accounts.spotify.com/authorize",e={response_type:"token",client_id:s["a"].spotify.clientId,redirect_uri:window.location.origin+window.location.pathname,state:"",scope:["user-top-read"]},n=Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&");console.log("params",e),console.log("URL: ".concat(t,"?").concat(n)),window.location.assign("".concat(t,"?").concat(n))}}},l=c,u=n("2877"),d=n("6544"),p=n.n(d),h=n("8336"),g=n("62ad"),m=n("a523"),v=(n("8ce9"),n("7560")),f=v["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}}),w=n("6b53"),y=n("0fd9"),_=Object(u["a"])(l,i,o,!1,null,null,null);e["default"]=_.exports;p()(_,{VBtn:h["a"],VCol:g["a"],VContainer:m["a"],VDivider:f,VResponsive:w["a"],VRow:y["a"]})}}]);
//# sourceMappingURL=authenticate.79d2fdfc.js.map