{"version":3,"sources":["webpack:///./src/views/Authenticate.vue?2886","webpack:///src/views/Authenticate.vue","webpack:///./src/views/Authenticate.vue?951c","webpack:///./node_modules/vuetify/lib/components/VDivider/VDivider.js","webpack:///./src/views/Authenticate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","loginLoading","on","startAuthenticationProcess","staticRenderFns","name","data","mounted","redirectedFrom","console","log","$localStorage","set","$router","push","warn","params","methods","window","location","origin","pathname","assign","extend","props","inset","Boolean","vertical","h","orientation","$attrs","role","class","themeClasses","$listeners","component","VBtn","VCol","VContainer","VDivider","VResponsive","VRow"],"mappings":"8IAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,aAAa,CAACA,EAAG,OAAO,CAACE,MAAM,CAAC,MAAQ,QAAQ,QAAU,WAAW,CAACF,EAAG,OAAO,CAACG,YAAY,QAAQD,MAAM,CAAC,KAAO,KAAK,GAAK,OAAO,CAACF,EAAG,KAAK,CAACG,YAAY,gCAAgC,CAACP,EAAIQ,GAAG,6BAA6BJ,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAACP,EAAIQ,GAAG,+CAA+CJ,EAAG,WAAW,CAACG,YAAY,SAASH,EAAG,KAAK,CAACG,YAAY,cAAc,CAACP,EAAIQ,GAAG,yEAAyEJ,EAAG,OAAO,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,GAAG,QAAUN,EAAIS,cAAcC,GAAG,CAAC,MAAQV,EAAIW,6BAA6B,CAACX,EAAIQ,GAAG,cAAc,IAAI,IAAI,IAAI,IACluBI,EAAkB,G,iCCyCtB,GACEC,KAAM,eACNC,KAAM,WAAR,OACA,gBACA,mEAEEC,QANF,WAOQ,EAAR,6CACMd,KAAKU,6BAIP,IAAJ,wCACI,GAAIK,GAAkB,EAA1B,qBACMf,KAAKQ,cAAe,EACpB,IAAN,YACM,SAAN,GAAQ,OAAR,kBACM,SAAN,GAAQ,OAAR,oBACM,SAAN,GAAQ,OAAR,qDACM,SAAN,GAAQ,OAAR,0FACM,EAAN,YALA,CAMA,GAIU,CACV,eACA,aACA,QACA,cACA,kEACQQ,QAAQC,IAAI,iCAEZjB,KAAKkB,cAAcC,IAAI,eAAgB,EAA/C,yBAEQnB,KAAKoB,QAAQC,KAAK,CAA1B,iBAEQL,QAAQM,KAAK,4DAA6DC,GAE5EvB,KAAKQ,cAAe,IAGxBgB,QAAS,CACPd,2BADJ,WAEM,IAAN,2CACA,GACQ,cAAiB,QACjB,UAAa,EAArB,sBACQ,aAAgBe,OAAOC,SAASC,OAASF,OAAOC,SAASE,SACzD,MAAS,GACT,MAAS,CACjB,kBAIA,iBACA,iBAAQ,MAAR,yEACA,UAEMZ,QAAQC,IAAI,SAAlB,GACMD,QAAQC,IAAI,QAAlB,yBAEMQ,OAAOC,SAASG,OAAO,GAA7B,4BCxGiZ,I,6FCIlY,SAAUC,OAAO,CAC9BlB,KAAM,YACNmB,MAAO,CACLC,MAAOC,QACPC,SAAUD,SAGZ,OAAOE,GAEL,IAAIC,EAMJ,OAJKpC,KAAKqC,OAAOC,MAA6B,cAArBtC,KAAKqC,OAAOC,OACnCF,EAAcpC,KAAKkC,SAAW,WAAa,cAGtCC,EAAE,KAAM,CACbI,MAAO,CACL,aAAa,EACb,mBAAoBvC,KAAKgC,MACzB,sBAAuBhC,KAAKkC,YACzBlC,KAAKwC,cAEVnC,MAAO,CACLiC,KAAM,YACN,mBAAoBF,KACjBpC,KAAKqC,QAEV5B,GAAIT,KAAKyC,gB,wBCxBXC,EAAY,eACd,EACA5C,EACAa,GACA,EACA,KACA,KACA,MAIa,aAAA+B,EAAiB,QAUhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,aAAA,KAAWC,SAAA,EAASC,cAAA,KAAYC,OAAA","file":"js/authenticate.79d2fdfc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('VResponsive',[_c('VContainer',[_c('VRow',{attrs:{\"align\":\"start\",\"justify\":\"center\"}},[_c('VCol',{staticClass:\"mt-12\",attrs:{\"cols\":\"12\",\"sm\":\"10\"}},[_c('h3',{staticClass:\"display-2 font-weight-medium\"},[_vm._v(\" Spotify track preview \")]),_c('div',{staticClass:\"mt-2 subtitle-1\"},[_vm._v(\" Player to play the Spotify song preview \")]),_c('VDivider',{staticClass:\"my-3\"}),_c('h6',{staticClass:\"title mb-3\"},[_vm._v(\" Authenticate this application by clicking the login button below! \")]),_c('VBtn',{attrs:{\"color\":\"primary\",\"large\":\"\",\"loading\":_vm.loginLoading},on:{\"click\":_vm.startAuthenticationProcess}},[_vm._v(\" Login \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"html\">\n  <VResponsive>\n    <VContainer>\n      <VRow\n        align=\"start\"\n        justify=\"center\"\n      >\n        <VCol\n          class=\"mt-12\"\n          cols=\"12\"\n          sm=\"10\"\n        >\n          <h3 class=\"display-2 font-weight-medium\">\n            Spotify track preview\n          </h3>\n          <div class=\"mt-2 subtitle-1\">\n            Player to play the Spotify song preview\n          </div>\n\n          <VDivider class=\"my-3\" />\n          <h6 class=\"title mb-3\">\n            Authenticate this application by clicking the login button below!\n          </h6>\n\n          <VBtn\n            color=\"primary\"\n            large\n            :loading=\"loginLoading\"\n            @click=\"startAuthenticationProcess\"\n          >\n            Login\n          </VBtn>\n        </VCol>\n      </VRow>\n    </VContainer>\n  </VResponsive>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport AppInfo from '../app-info';\n\nexport default {\n  name: 'Authenticate',\n  data: () => ({\n    loginLoading: false,\n    gradient: 'to top right, rgba(63,81,181, .7), rgba(25,32,72, .7)'\n  }),\n  mounted () {\n    if (_.get(this.$route, 'params.authenticateNow')) {\n      this.startAuthenticationProcess();\n    }\n\n    // Parse the redirect URL from spotify\n    const redirectedFrom = _.get(this.$route, 'redirectedFrom');\n    if (redirectedFrom && _.startsWith(redirectedFrom, '/')) {\n      this.loginLoading = true;\n      const params = _.flow( // input: /foo=bar&bar=foo\n        v => v.substring(1), // Remove the first '/': foo=bar&bar=foo\n        v => _.split(v, '&'), // Split the query string in it's segments; ['foo=bar', 'bar=foo']\n        v => _.map(v, segment => _.split(segment, '=')), // Split to components at the '='; [['foo', 'bar'], ['bar', 'foo']]\n        v => _.map(v, components => _.map(components, component => decodeURIComponent(component))), // decodeURIComponent for all strings\n        _.fromPairs // Create an object\n      )(redirectedFrom);\n\n      // Verify it has all the members\n      // Verify that expires_in is not 0\n      if ([\n        'access_token',\n        'expires_in',\n        'state',\n        'token_type'\n      ].every(k => k in params) && _.get(params, 'expires_in', 0) > 0) {\n        console.log('Got access token successfully');\n        // Store token in localstorage\n        this.$localStorage.set('access_token', _.get(params, 'access_token'));\n        // Redirect to player\n        this.$router.push({ name: 'Player' });\n      } else {\n        console.warn('The redirectedFrom key did not meet the required criteria', params);\n      }\n      this.loginLoading = false;\n    }\n  },\n  methods: {\n    startAuthenticationProcess () {\n      const base = 'https://accounts.spotify.com/authorize';\n      const params = {\n        'response_type': 'token',\n        'client_id': AppInfo.spotify.clientId,\n        'redirect_uri': window.location.origin + window.location.pathname, // The URI to redirect to after the user grants/denies permission.\n        'state': '', // Cross-Site Request Forgery reduction (https://tools.ietf.org/html/rfc6749#section-10.12)\n        'scope': [\n          'user-top-read' // Read access to a user's top artists and tracks.\n        ]\n        // 'show_dialog': false // Whether or not to force the user to approve the app again if theyâ€™ve already done so.\n      };\n      const query = Object.keys(params)\n        .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n        .join('&');\n\n      console.log(`params`, params);\n      console.log(`URL: ${base}?${query}`);\n\n      window.location.assign(`${base}?${query}`);\n    }\n  }\n};\n</script>\n\n<style lang=\"css\">\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authenticate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authenticate.vue?vue&type=script&lang=js&\"","// Styles\nimport \"../../../src/components/VDivider/VDivider.sass\"; // Mixins\n\nimport Themeable from '../../mixins/themeable';\nexport default Themeable.extend({\n  name: 'v-divider',\n  props: {\n    inset: Boolean,\n    vertical: Boolean\n  },\n\n  render(h) {\n    // WAI-ARIA attributes\n    let orientation;\n\n    if (!this.$attrs.role || this.$attrs.role === 'separator') {\n      orientation = this.vertical ? 'vertical' : 'horizontal';\n    }\n\n    return h('hr', {\n      class: {\n        'v-divider': true,\n        'v-divider--inset': this.inset,\n        'v-divider--vertical': this.vertical,\n        ...this.themeClasses\n      },\n      attrs: {\n        role: 'separator',\n        'aria-orientation': orientation,\n        ...this.$attrs\n      },\n      on: this.$listeners\n    });\n  }\n\n});\n//# sourceMappingURL=VDivider.js.map","import { render, staticRenderFns } from \"./Authenticate.vue?vue&type=template&id=6a306372&lang=html&\"\nimport script from \"./Authenticate.vue?vue&type=script&lang=js&\"\nexport * from \"./Authenticate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VResponsive } from 'vuetify/lib/components/VResponsive';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VDivider,VResponsive,VRow})\n"],"sourceRoot":""}